const _0x295f5e=_0x41a4;(function(_0x443e06,_0x11039f){const _0x20361f=_0x41a4,_0xa9cedb=_0x443e06();while(!![]){try{const _0xbbf0e6=-parseInt(_0x20361f(0x94))/0x1+-parseInt(_0x20361f(0x10a))/0x2*(parseInt(_0x20361f(0x8c))/0x3)+parseInt(_0x20361f(0x8e))/0x4*(-parseInt(_0x20361f(0x152))/0x5)+-parseInt(_0x20361f(0x104))/0x6+parseInt(_0x20361f(0xb4))/0x7+-parseInt(_0x20361f(0x145))/0x8+parseInt(_0x20361f(0x121))/0x9*(parseInt(_0x20361f(0xeb))/0xa);if(_0xbbf0e6===_0x11039f)break;else _0xa9cedb['push'](_0xa9cedb['shift']());}catch(_0x33eee0){_0xa9cedb['push'](_0xa9cedb['shift']());}}}(_0x3ea1,0x6a2e5));const BASE_URL='http://localhost:3001',POINTS_BY_BUG={0x1:0x28,0x2:0x32,0x3:0x28,0x4:0x32,0x5:0x3c,0x6:0x28,0x7:0x3c,0x8:0x3c,0x9:0x3c,0xa:0x32,0xb:0x50,0xc:0x3c,0xd:0x32,0xe:0x3c,0xf:0x32,0x10:0x3c,0x11:0x32,0x12:0x50},TOTAL_BUGS=Object['keys'](POINTS_BY_BUG)[_0x295f5e(0x9a)];function _0x3ea1(){const _0x3de62a=['getDate','Cannot\x20test\x20duplicate\x20check','Cancel\x20WHERE\x20clause\x20-\x20cannot\x20verify','2117962orUDLI','cancel','/health','undefined','results','filter','log','cancelled','Packages\x20endpoint\x20works\x20correctly','setDate','Total\x20Tests:\x20','Second\x20redemption\x20status:\x20','Renewal\x20worker\x20uses\x20undefined\x20variable','renewal','await','testBug15MissingAsync','inactive','Cannot\x20generate\x20valid\x20token\x20(bug\x20#1\x20present)','Undefined\x20variable\x20error\x20-\x20BUG\x20PRESENT','Logout\x20status\x20code','logResult','toFixed','Token\x20Promise\x20check','token','/renew','Create\x20subscription\x20has\x20column\x20error','Teams\x20endpoint','/cancel','testBug12DuplicateSubscriptions','/api/teams','already','column','testBug4MissingAwait','Got\x20400\x20but\x20unclear\x20reason:\x20','✓\x20PASS','testBug3LogoutWrongStatus','Price\x20calculation\x20error','Accepts\x20past\x20start\x20dates','Settings\x20endpoint\x20works\x20correctly','Orphaned\x20assignments\x20check\x20error','/assign-ticket','isArray','valid','Unexpected\x20status:\x20','Correctly\x20uses\x20id\x20field','/api/subscriptions/','testBug17PriceCalculation','Price:\x20','Promise','Settings\x20endpoint\x20error','Ticket\x20reuse\x20check','WHERE\x20clause\x20correct','testBug11CancelMissingWhere','Cannot\x20create\x20test\x20subscriptions\x20(other\x20bugs\x20present)','json','8901580vLNWIC','Cannot\x20test\x20orphaned\x20assignments','Game\x20assignments\x20not\x20cleaned\x20up\x20-\x20BUG\x20PRESENT','randomDate','price','Subscription\x20creation\x20fails\x20due\x20to\x20wrong\x20column\x20name','/settings','baseUrl','/use-ticket','Correctly\x20validates\x20dates','Token\x20generation\x20returns\x20valid\x20token','pkg_id','application/json','Date\x20validation\x20error','status','Logout\x20returns\x20correct\x20200\x20status','/api/auth/validate','Rejects\x20past\x20start\x20dates','/api/subscriptions','testBug9CreateWrongColumn','Allows\x20duplicate\x20subscriptions','GET\x20subscription\x20always\x20returns\x20404','PUT','Price\x20calculation\x20is\x20100x\x20too\x20high','argv','2801700OZIuaL','Cancel\x20properly\x20cleans\x20up\x20game_assignments','testBug13AcceptsPastDates','\x20-\x20','Subscription\x20uses\x20requested\x20ID\x20correctly','keys','14hyGArg','date','Token\x20format','Renewal\x20worker\x20endpoint\x20not\x20found','Endpoint\x20not\x20responding','Correctly\x20uses\x20req.params.id','Subscription\x20uses\x20forced\x20ID\x20(same\x20data)','Other\x20bugs\x20prevent\x20testing\x20(likely\x20bug\x20#9\x20present)','Properly\x20prevents\x20access\x20to\x20cancelled\x20subscription\x20tickets','Unexpected\x20status\x20code:\x20','Logout\x20endpoint','duplicate','POST','testBug6TeamsEmptyArray','Missing\x20WHERE\x20clause\x20-\x20BUG\x20PRESENT','Error:','Failed:\x20','exit','No\x20undefined\x20variable\x20issues','Token\x20generation','Missing\x20await\x20-\x20BUG\x20PRESENT','Server\x20error:\x20','Correct\x20token\x20format','18JgBUcx','First\x20creation\x20failed:\x20','First\x20creation\x20failed\x20with\x20other\x20error:\x20','testBug7SubscriptionForcedId','Renewal\x20worker\x20-\x20cannot\x20test','Token\x20validation\x20works\x20correctly','Teams\x20endpoint\x20returns\x20empty\x20array','Price\x20calculation','Error:\x20','Renew\x20uses\x20wrong\x20WHERE\x20field\x20(returns\x20404)','Settings\x20returns\x20Promise','testBug10RenewWrongField','runAllTests','charAt','Uses\x20subscription_id\x20instead\x20of\x20id\x20-\x20BUG\x20PRESENT','Cancel\x20endpoint','error','Wrong\x20column\x20name\x20-\x20BUG\x20PRESENT','Correctly\x20validates\x20valid\x20tokens','Renew\x20incorrect\x20response','message','Subscription\x20ID\x20test\x20-\x20cannot\x20create\x20subscriptions','Passed:\x20','Unexpected\x20token:\x20','Token\x20returns\x20proper\x20string','Logout\x20returns\x20404\x20instead\x20of\x20200','Date\x20validation','Create\x20subscription','Correct\x20status\x20code','Bug\x20#','Subscription\x20ID\x20handling','testBug8PackagesWrongColumn','testBug14TicketReuse','Unclear\x20if\x20cleanup\x20works:\x20','...','Score:\x20','4143408LTAPIZ','Ignores\x20database\x20results\x20-\x20BUG\x20PRESENT','score','Token\x20validation','Renewal\x20worker\x20endpoint\x20not\x20implemented','Cannot\x20test\x20duplicate\x20check\x20-\x20bug\x20#9\x20present','substring','/packages','Status:\x20','Price\x20calculation\x20correct','Settings\x20endpoint','\x20-\x20BUG\x20PRESENT','GET\x20subscription\x20endpoint','5joJXRF','Subscription\x20uses\x20forced\x20nonexistent\x20ID','/api/auth/token','Token\x20is\x20null/undefined\x20-\x20BUG\x20PRESENT','Renew\x20endpoint\x20error','GET\x20subscription\x20returns\x20data\x20when\x20exists','Found\x20','values','Ticket\x20reuse\x20check\x20-\x20cannot\x20test','Packages\x20endpoint\x20has\x20SQL\x20error','Unexpected\x20response:\x20','Packages\x20endpoint','Settings\x20endpoint\x20missing\x20async','testBug2TokenValidationError','Renew\x20endpoint','Cancel\x20only\x20affects\x20target\x20subscription','includes','renewed','/api/subscriptions/process-renewals','renewalResult','string','maxScore','Correctly\x20async','123729iqWNnp','testBug16RenewalWorker','480352ayguiB','Cannot\x20test\x20date\x20validation\x20-\x20bug\x20#9\x20present','Uses\x20renewalResult\x20instead\x20of\x20chargeResult\x20-\x20BUG\x20PRESENT','Teams\x20endpoint\x20format','Renewal\x20worker\x20unexpected\x20status','Game\x20assignment\x20not\x20found\x20(no\x20game_assignments\x20table)','254300mCZwsl','Invalid\x20response\x20format','random','object','Prevents\x20ticket\x20reuse','printSummary','length','testBug18OrphanedAssignments','toLowerCase','floor','stringify','Cannot\x20create\x20subscription\x20(bug\x20#9\x20likely\x20present)','Hard-coded\x20nonexistent\x20ID\x20-\x20BUG\x20PRESENT','testBug5SubscriptionAlways404','abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ','teamId','Correct\x20column\x20name\x20used','package_id','Correctly\x20checks\x20if\x20already\x20used','Orphaned\x20assignments','✗\x20FAIL','No\x20used\x20check\x20-\x20BUG\x20PRESENT','Expected\x20200,\x20got\x20','toISOString','randomString','Price\x20calculation\x20-\x20cannot\x20create\x20subscription','Token\x20validation\x20-\x20cannot\x20test','\x20teams','testBug1TokenUndefined'];_0x3ea1=function(){return _0x3de62a;};return _0x3ea1();}function _0x41a4(_0xda7f19,_0x4492f9){_0xda7f19=_0xda7f19-0x76;const _0x3ea19d=_0x3ea1();let _0x41a415=_0x3ea19d[_0xda7f19];return _0x41a415;}class EndpointTester{constructor(_0x18adc7=BASE_URL){const _0x27cca7=_0x295f5e;this[_0x27cca7(0xf2)]=_0x18adc7,this[_0x27cca7(0xb8)]=[],this[_0x27cca7(0x147)]=0x0,this[_0x27cca7(0x8a)]=Object[_0x27cca7(0x7c)](POINTS_BY_BUG)['reduce']((_0x4bb1a7,_0x1b3b2c)=>_0x4bb1a7+_0x1b3b2c,0x0);}[_0x295f5e(0xac)](_0x5b2d2c=0xa){const _0x1c1e99=_0x295f5e,_0x1a882a=_0x1c1e99(0xa2);let _0x769478='';for(let _0x144810=0x0;_0x144810<_0x5b2d2c;_0x144810++){_0x769478+=_0x1a882a[_0x1c1e99(0x12e)](Math[_0x1c1e99(0x9d)](Math['random']()*_0x1a882a[_0x1c1e99(0x9a)]));}return _0x769478;}[_0x295f5e(0xee)](_0x5e0a95=!![]){const _0x103660=_0x295f5e,_0x4c3cad=Math[_0x103660(0x9d)](Math[_0x103660(0x96)]()*0x16d)+0x1,_0x2fb98b=new Date();return _0x5e0a95?_0x2fb98b[_0x103660(0xbd)](_0x2fb98b[_0x103660(0xb1)]()+_0x4c3cad):_0x2fb98b['setDate'](_0x2fb98b['getDate']()-_0x4c3cad),_0x2fb98b[_0x103660(0xab)]()['split']('T')[0x0];}[_0x295f5e(0xc8)](_0x2094c1,_0x2421b4,_0x146164,_0x540945=''){const _0x5c1393=_0x295f5e,_0x26fc73={'bug':_0x2094c1,'description':_0x2421b4,'passed':_0x146164,'details':_0x540945};this[_0x5c1393(0xb8)]['push'](_0x26fc73);_0x146164&&(this[_0x5c1393(0x147)]+=POINTS_BY_BUG[_0x2094c1]||0x0);const _0x273e52=_0x146164?_0x5c1393(0xd6):_0x5c1393(0xa8);console['log'](_0x5c1393(0x13e)+_0x2094c1+':\x20'+_0x273e52+_0x5c1393(0x107)+_0x2421b4);}async['testBug1TokenUndefined'](){const _0x5fdd22=_0x295f5e;try{const _0x36e3c0=Math[_0x5fdd22(0x9d)](Math['random']()*0x64)+0x1,_0x1c9af6=await fetch(this[_0x5fdd22(0xf2)]+'/api/auth/token',{'method':_0x5fdd22(0x116),'headers':{'Content-Type':_0x5fdd22(0xf7)},'body':JSON[_0x5fdd22(0x9e)]({'userId':_0x36e3c0})});if(_0x1c9af6['status']===0xc8){const _0x1841d8=await _0x1c9af6[_0x5fdd22(0xea)]();Object[_0x5fdd22(0x109)](_0x1841d8[_0x5fdd22(0xcb)])[_0x5fdd22(0x9a)]==0x0||_0x1841d8['token']===undefined||_0x1841d8[_0x5fdd22(0xcb)]===_0x5fdd22(0xb7)?this[_0x5fdd22(0xc8)](0x1,'Token\x20generation\x20returns\x20undefined',![],_0x5fdd22(0x78)):this['logResult'](0x1,_0x5fdd22(0xf5),!![],'Token\x20returned:\x20'+String(_0x1841d8['token'])[_0x5fdd22(0x14b)](0x0,0x14)+_0x5fdd22(0x143));}else this[_0x5fdd22(0xc8)](0x1,_0x5fdd22(0x11d),![],_0x5fdd22(0x113)+_0x1c9af6[_0x5fdd22(0xf9)]);}catch(_0x3003a8){this['logResult'](0x1,'Token\x20generation',![],_0x5fdd22(0x129)+_0x3003a8[_0x5fdd22(0x135)]);}}async[_0x295f5e(0x82)](){const _0x5a41b8=_0x295f5e;try{const _0x3eff55=Math[_0x5a41b8(0x9d)](Math[_0x5a41b8(0x96)]()*0x64)+0x1,_0x32717a=await fetch(this[_0x5a41b8(0xf2)]+'/api/auth/token',{'method':_0x5a41b8(0x116),'headers':{'Content-Type':_0x5a41b8(0xf7)},'body':JSON[_0x5a41b8(0x9e)]({'userId':_0x3eff55})});if(_0x32717a[_0x5a41b8(0xf9)]===0xc8){const _0x591c6c=await _0x32717a['json'](),_0x3d48d7=_0x591c6c[_0x5a41b8(0xcb)];if(_0x3d48d7&&_0x3d48d7!==_0x5a41b8(0xb7)&&typeof _0x3d48d7!=='object'){const _0x2701a7=await fetch(this[_0x5a41b8(0xf2)]+_0x5a41b8(0xfb),{'method':_0x5a41b8(0x116),'headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'token':_0x3d48d7})});if(_0x2701a7[_0x5a41b8(0xf9)]===0x1f4){const _0x2b839b=await _0x2701a7[_0x5a41b8(0xea)](),_0x2a40eb=_0x2b839b[_0x5a41b8(0x131)]||'';_0x2a40eb[_0x5a41b8(0x85)]('invalidTokenMessage')||_0x2a40eb[_0x5a41b8(0x9c)]()[_0x5a41b8(0x85)](_0x5a41b8(0xb7))?this[_0x5a41b8(0xc8)](0x2,'Token\x20validation\x20crashes\x20with\x20undefined\x20variable',![],_0x5a41b8(0xc6)):this['logResult'](0x2,'Token\x20validation\x20error',![],_0x5a41b8(0x11f)+_0x2a40eb);}else{if(_0x2701a7[_0x5a41b8(0xf9)]===0xc8){const _0x1cc766=await _0x2701a7[_0x5a41b8(0xea)]();_0x1cc766[_0x5a41b8(0xde)]===!![]?this[_0x5a41b8(0xc8)](0x2,_0x5a41b8(0x126),!![],_0x5a41b8(0x133)):this[_0x5a41b8(0xc8)](0x2,'Token\x20validation\x20incorrect\x20response',![],_0x5a41b8(0x95));}else this['logResult'](0x2,'Token\x20validation\x20wrong\x20status',![],_0x5a41b8(0xaa)+_0x2701a7[_0x5a41b8(0xf9)]);}}else this[_0x5a41b8(0xc8)](0x2,_0x5a41b8(0xae),![],_0x5a41b8(0xc5));}else this[_0x5a41b8(0xc8)](0x2,_0x5a41b8(0xae),![],'Cannot\x20generate\x20token\x20for\x20testing');}catch(_0x3181df){this[_0x5a41b8(0xc8)](0x2,_0x5a41b8(0x148),![],'Error:\x20'+_0x3181df[_0x5a41b8(0x135)]);}}async[_0x295f5e(0xd7)](){const _0x45302c=_0x295f5e;try{const _0x865e68=this[_0x45302c(0xac)](0x40),_0x5af8af=await fetch(this[_0x45302c(0xf2)]+'/api/auth/logout',{'method':_0x45302c(0x116),'headers':{'Content-Type':'application/json'},'body':JSON[_0x45302c(0x9e)]({'token':_0x865e68})});if(_0x5af8af[_0x45302c(0xf9)]===0x194)this['logResult'](0x3,_0x45302c(0x13a),![],'Wrong\x20status\x20code\x20-\x20BUG\x20PRESENT');else _0x5af8af[_0x45302c(0xf9)]===0xc8?this[_0x45302c(0xc8)](0x3,_0x45302c(0xfa),!![],_0x45302c(0x13d)):this['logResult'](0x3,_0x45302c(0xc7),![],_0x45302c(0xdf)+_0x5af8af[_0x45302c(0xf9)]);}catch(_0x219008){this[_0x45302c(0xc8)](0x3,_0x45302c(0x114),![],_0x45302c(0x129)+_0x219008[_0x45302c(0x135)]);}}async[_0x295f5e(0xd4)](){const _0x31f6ee=_0x295f5e;try{const _0x4f14a7=Math['floor'](Math[_0x31f6ee(0x96)]()*0x64)+0x1,_0x3631ef=await fetch(this[_0x31f6ee(0xf2)]+_0x31f6ee(0x77),{'method':_0x31f6ee(0x116),'headers':{'Content-Type':_0x31f6ee(0xf7)},'body':JSON[_0x31f6ee(0x9e)]({'userId':_0x4f14a7})});if(_0x3631ef['status']===0xc8){const _0x36bdd7=await _0x3631ef[_0x31f6ee(0xea)](),_0x21968c=_0x36bdd7[_0x31f6ee(0xcb)];if(typeof _0x21968c===_0x31f6ee(0x97)||typeof _0x21968c===_0x31f6ee(0x89)&&_0x21968c[_0x31f6ee(0x85)](_0x31f6ee(0xe4)))this['logResult'](0x4,'Token\x20returns\x20Promise\x20object',![],_0x31f6ee(0x11e));else typeof _0x21968c===_0x31f6ee(0x89)&&_0x21968c[_0x31f6ee(0x9a)]>0xa?this['logResult'](0x4,_0x31f6ee(0x139),!![],_0x31f6ee(0x120)):this[_0x31f6ee(0xc8)](0x4,_0x31f6ee(0x10c),![],_0x31f6ee(0x138)+_0x21968c);}else this[_0x31f6ee(0xc8)](0x4,_0x31f6ee(0x11d),![],_0x31f6ee(0x14d)+_0x3631ef[_0x31f6ee(0xf9)]);}catch(_0x5ca40c){this[_0x31f6ee(0xc8)](0x4,_0x31f6ee(0xca),![],_0x31f6ee(0x129)+_0x5ca40c['message']);}}async[_0x295f5e(0xa1)](){const _0x11c82f=_0x295f5e;try{const _0x34467c=[Math[_0x11c82f(0x9d)](Math[_0x11c82f(0x96)]()*0x2710)+0x1,Math[_0x11c82f(0x9d)](Math[_0x11c82f(0x96)]()*0x2710)+0x1,Math[_0x11c82f(0x9d)](Math[_0x11c82f(0x96)]()*0x2710)+0x1,Math[_0x11c82f(0x9d)](Math[_0x11c82f(0x96)]()*0x4e20)+0x2711];let _0x1bd95b=!![];for(const _0x3c4c2f of _0x34467c){const _0x434f49={'userId':_0x3c4c2f,'packageId':0x1,'startDate':this['randomDate'](!![]),'endDate':this['randomDate'](!![])};let _0x272ee2=await fetch(this[_0x11c82f(0xf2)]+'/api/subscriptions',{'method':_0x11c82f(0x116),'headers':{'Content-Type':_0x11c82f(0xf7)},'body':JSON[_0x11c82f(0x9e)](_0x434f49)});const _0x3b9686=await fetch(this[_0x11c82f(0xf2)]+_0x11c82f(0xe1)+(await _0x272ee2[_0x11c82f(0xea)]())['id']);if(_0x3b9686[_0x11c82f(0xf9)]!==0x194){_0x1bd95b=![];break;}}_0x1bd95b?this[_0x11c82f(0xc8)](0x5,_0x11c82f(0x100),![],_0x11c82f(0xa0)):this[_0x11c82f(0xc8)](0x5,_0x11c82f(0x7a),!![],'Correctly\x20queries\x20by\x20requested\x20ID');}catch(_0x4e31d6){this[_0x11c82f(0xc8)](0x5,_0x11c82f(0x151),![],'Error:\x20'+_0x4e31d6['message']);}}async[_0x295f5e(0x117)](){const _0x3ba2c3=_0x295f5e;try{const _0x47688c=await fetch(this['baseUrl']+_0x3ba2c3(0xd1));if(_0x47688c[_0x3ba2c3(0xf9)]===0xc8){const _0x54c4a8=await _0x47688c['json']();if(Array[_0x3ba2c3(0xdd)](_0x54c4a8)&&_0x54c4a8['length']===0x0)this[_0x3ba2c3(0xc8)](0x6,_0x3ba2c3(0x127),![],_0x3ba2c3(0x146));else Array['isArray'](_0x54c4a8)&&_0x54c4a8[_0x3ba2c3(0x9a)]>0x0?this['logResult'](0x6,'Teams\x20endpoint\x20returns\x20data',!![],_0x3ba2c3(0x7b)+_0x54c4a8[_0x3ba2c3(0x9a)]+_0x3ba2c3(0xaf)):this[_0x3ba2c3(0xc8)](0x6,_0x3ba2c3(0x91),![],_0x3ba2c3(0x7f)+_0x54c4a8);}else this[_0x3ba2c3(0xc8)](0x6,_0x3ba2c3(0xce),![],_0x3ba2c3(0x14d)+_0x47688c[_0x3ba2c3(0xf9)]);}catch(_0x2c3f5e){this['logResult'](0x6,_0x3ba2c3(0xce),![],'Error:\x20'+_0x2c3f5e[_0x3ba2c3(0x135)]);}}async[_0x295f5e(0x124)](){const _0x39537c=_0x295f5e;try{const _0x26da06=Math[_0x39537c(0x9d)](Math['random']()*0x2328)+0x3e8,_0x324131=Math[_0x39537c(0x9d)](Math[_0x39537c(0x96)]()*0x2328)+0x3e8,_0x347e32={'userId':_0x26da06,'packageId':0x1,'startDate':this[_0x39537c(0xee)](!![]),'endDate':this[_0x39537c(0xee)](!![])},_0x7e5536={'userId':_0x324131,'packageId':0x1,'startDate':this['randomDate'](!![]),'endDate':this[_0x39537c(0xee)](!![])},_0x24dc99=await fetch(this['baseUrl']+_0x39537c(0xfd),{'method':_0x39537c(0x116),'headers':{'Content-Type':_0x39537c(0xf7)},'body':JSON['stringify'](_0x347e32)}),_0x260937=await fetch(this[_0x39537c(0xf2)]+'/api/subscriptions',{'method':_0x39537c(0x116),'headers':{'Content-Type':_0x39537c(0xf7)},'body':JSON[_0x39537c(0x9e)](_0x7e5536)});if(_0x24dc99[_0x39537c(0xf9)]===0xc9&&_0x260937['status']===0xc9){const _0x1c3c52=await _0x24dc99[_0x39537c(0xea)](),_0x6475ff=await _0x260937[_0x39537c(0xea)](),_0x20d742=_0x1c3c52['id'],_0x25739a=_0x6475ff['id'],_0x20bba3=await fetch(this[_0x39537c(0xf2)]+_0x39537c(0xe1)+_0x20d742),_0x664f6b=await fetch(this['baseUrl']+_0x39537c(0xe1)+_0x25739a);if(_0x20bba3[_0x39537c(0xf9)]===0xc8&&_0x664f6b['status']===0xc8){const _0x1c5ce7=await _0x20bba3['json'](),_0x144f1c=await _0x664f6b[_0x39537c(0xea)]();_0x1c5ce7['id']===_0x144f1c['id']?this[_0x39537c(0xc8)](0x7,_0x39537c(0x110),![],'Hard-coded\x20ID\x20ignores\x20parameter\x20-\x20BUG\x20PRESENT'):this[_0x39537c(0xc8)](0x7,_0x39537c(0x108),!![],_0x39537c(0x10f));}else _0x20bba3[_0x39537c(0xf9)]===0x194&&_0x664f6b[_0x39537c(0xf9)]===0x194?this[_0x39537c(0xc8)](0x7,_0x39537c(0x76),![],_0x39537c(0xa0)):this['logResult'](0x7,_0x39537c(0x13f),![],_0x39537c(0xdf)+_0x20bba3['status']+',\x20'+_0x664f6b['status']);}else this[_0x39537c(0xc8)](0x7,_0x39537c(0x136),![],_0x39537c(0x111));}catch(_0x3b7126){this[_0x39537c(0xc8)](0x7,_0x39537c(0x13f),![],_0x39537c(0x129)+_0x3b7126[_0x39537c(0x135)]);}}async[_0x295f5e(0x140)](){const _0x770c6b=_0x295f5e;try{const _0x4e3f28=Math[_0x770c6b(0x9d)](Math[_0x770c6b(0x96)]()*0x64)+0x1,_0x2eeb7a=await fetch(this[_0x770c6b(0xf2)]+'/api/teams/'+_0x4e3f28+_0x770c6b(0x14c));if(_0x2eeb7a[_0x770c6b(0xf9)]===0x1f4){const _0x3f6de1=await _0x2eeb7a['json'](),_0x30d3d9=_0x3f6de1[_0x770c6b(0x131)]||'';_0x30d3d9[_0x770c6b(0x85)](_0x770c6b(0xa3))||_0x30d3d9['toLowerCase']()[_0x770c6b(0x85)]('column')?this[_0x770c6b(0xc8)](0x8,_0x770c6b(0x7e),![],_0x770c6b(0x132)):this['logResult'](0x8,'Packages\x20endpoint\x20error',![],_0x770c6b(0x11f)+_0x30d3d9);}else _0x2eeb7a['status']===0xc8?this['logResult'](0x8,_0x770c6b(0xbc),!![],_0x770c6b(0xa4)):this[_0x770c6b(0xc8)](0x8,'Packages\x20endpoint',![],'Status:\x20'+_0x2eeb7a['status']);}catch(_0x35da72){this[_0x770c6b(0xc8)](0x8,_0x770c6b(0x80),![],'Error:\x20'+_0x35da72[_0x770c6b(0x135)]);}}async['testBug9CreateWrongColumn'](){const _0x2bf91d=_0x295f5e;try{const _0x166515={'userId':Math[_0x2bf91d(0x9d)](Math[_0x2bf91d(0x96)]()*0x186a0)+0x1,'packageId':Math[_0x2bf91d(0x9d)](Math[_0x2bf91d(0x96)]()*0x5)+0x1,'startDate':this['randomDate'](!![]),'endDate':this['randomDate'](!![])},_0x3f366c=await fetch(this['baseUrl']+_0x2bf91d(0xfd),{'method':'POST','headers':{'Content-Type':_0x2bf91d(0xf7)},'body':JSON[_0x2bf91d(0x9e)](_0x166515)});if(_0x3f366c[_0x2bf91d(0xf9)]===0x190||_0x3f366c['status']===0x1f4){const _0x3c4297=await _0x3f366c[_0x2bf91d(0xea)](),_0x263464=_0x3c4297[_0x2bf91d(0x131)]||'';_0x263464['includes'](_0x2bf91d(0xf6))||_0x263464['includes'](_0x2bf91d(0xa5))||_0x263464[_0x2bf91d(0x9c)]()['includes']('column')?this['logResult'](0x9,_0x2bf91d(0xcd),![],_0x2bf91d(0x132)):this['logResult'](0x9,'Create\x20subscription\x20error',![],'Error:\x20'+_0x263464);}else _0x3f366c[_0x2bf91d(0xf9)]===0xc9?this[_0x2bf91d(0xc8)](0x9,'Create\x20subscription\x20works\x20correctly',!![],_0x2bf91d(0xa4)):this['logResult'](0x9,_0x2bf91d(0x13c),![],_0x2bf91d(0x14d)+_0x3f366c[_0x2bf91d(0xf9)]);}catch(_0x4c8794){this[_0x2bf91d(0xc8)](0x9,_0x2bf91d(0x13c),![],'Error:\x20'+_0x4c8794[_0x2bf91d(0x135)]);}}async[_0x295f5e(0x12c)](){const _0x2dfdd7=_0x295f5e;try{const _0xc8e0ae=Math[_0x2dfdd7(0x9d)](Math['random']()*0x2328)+0x3e8,_0x422e65={'userId':_0xc8e0ae,'packageId':0x1,'startDate':this[_0x2dfdd7(0xee)](!![]),'endDate':this[_0x2dfdd7(0xee)](!![])},_0x8ea847=await fetch(this[_0x2dfdd7(0xf2)]+_0x2dfdd7(0xfd),{'method':_0x2dfdd7(0x116),'headers':{'Content-Type':_0x2dfdd7(0xf7)},'body':JSON[_0x2dfdd7(0x9e)](_0x422e65)});if(_0x8ea847[_0x2dfdd7(0xf9)]===0xc9){const _0x407b8b=await _0x8ea847['json'](),_0x39a076=_0x407b8b['id'],_0x2bd4ba=await fetch(this['baseUrl']+_0x2dfdd7(0xe1)+_0x39a076+_0x2dfdd7(0xcc),{'method':_0x2dfdd7(0x101)});if(_0x2bd4ba[_0x2dfdd7(0xf9)]===0x194)this['logResult'](0xa,_0x2dfdd7(0x12a),![],_0x2dfdd7(0x12f));else{if(_0x2bd4ba[_0x2dfdd7(0xf9)]===0xc8){const _0x5dc7aa=await _0x2bd4ba[_0x2dfdd7(0xea)]();_0x5dc7aa[_0x2dfdd7(0x86)]===!![]?this[_0x2dfdd7(0xc8)](0xa,'Renew\x20uses\x20correct\x20WHERE\x20field',!![],_0x2dfdd7(0xe0)):this[_0x2dfdd7(0xc8)](0xa,_0x2dfdd7(0x134),![],'Unexpected\x20response\x20format');}else this[_0x2dfdd7(0xc8)](0xa,_0x2dfdd7(0x79),![],_0x2dfdd7(0x14d)+_0x2bd4ba[_0x2dfdd7(0xf9)]);}}else this['logResult'](0xa,'Renew\x20test\x20-\x20cannot\x20create\x20subscription',![],_0x2dfdd7(0x111));}catch(_0x27282a){this['logResult'](0xa,_0x2dfdd7(0x83),![],'Error:\x20'+_0x27282a[_0x2dfdd7(0x135)]);}}async['testBug11CancelMissingWhere'](){const _0x9477cc=_0x295f5e;try{const _0x20502c=Math['floor'](Math[_0x9477cc(0x96)]()*0x2328)+0x3e8,_0x56695d=Math[_0x9477cc(0x9d)](Math[_0x9477cc(0x96)]()*0x2328)+0x3e8,_0x3a3f65={'userId':_0x20502c,'packageId':0x1,'startDate':this[_0x9477cc(0xee)](!![]),'endDate':this['randomDate'](!![])},_0x531e4={'userId':_0x56695d,'packageId':0x1,'startDate':this[_0x9477cc(0xee)](!![]),'endDate':this['randomDate'](!![])},_0x5986fa=await fetch(this[_0x9477cc(0xf2)]+_0x9477cc(0xfd),{'method':_0x9477cc(0x116),'headers':{'Content-Type':_0x9477cc(0xf7)},'body':JSON[_0x9477cc(0x9e)](_0x3a3f65)}),_0x2dc60b=await fetch(this[_0x9477cc(0xf2)]+_0x9477cc(0xfd),{'method':_0x9477cc(0x116),'headers':{'Content-Type':'application/json'},'body':JSON[_0x9477cc(0x9e)](_0x531e4)});if(_0x5986fa[_0x9477cc(0xf9)]===0xc9&&_0x2dc60b['status']===0xc9){const _0x4aeb28=await _0x5986fa[_0x9477cc(0xea)](),_0x3372f7=await _0x2dc60b['json'](),_0x2ec9f6=_0x4aeb28['id'],_0x14fb67=_0x3372f7['id'],_0x523625=await fetch(this[_0x9477cc(0xf2)]+_0x9477cc(0xe1)+_0x2ec9f6+_0x9477cc(0xcf),{'method':_0x9477cc(0x116)});if(_0x523625['status']===0xc8){const _0xb3629a=await fetch(this[_0x9477cc(0xf2)]+_0x9477cc(0xe1)+_0x14fb67);if(_0xb3629a[_0x9477cc(0xf9)]===0xc8){const _0xffece=await _0xb3629a[_0x9477cc(0xea)]();_0xffece[_0x9477cc(0xf9)]===_0x9477cc(0xbb)?this[_0x9477cc(0xc8)](0xb,'Cancel\x20missing\x20WHERE\x20-\x20cancels\x20ALL\x20subscriptions',![],_0x9477cc(0x118)):this[_0x9477cc(0xc8)](0xb,_0x9477cc(0x84),!![],_0x9477cc(0xe7));}else this[_0x9477cc(0xc8)](0xb,_0x9477cc(0xb3),![],'Cannot\x20check\x20second\x20subscription:\x20'+_0xb3629a['status']);}else this[_0x9477cc(0xc8)](0xb,_0x9477cc(0x130),![],'Status:\x20'+_0x523625[_0x9477cc(0xf9)]);}else this[_0x9477cc(0xc8)](0xb,'Cancel\x20WHERE\x20clause\x20-\x20Cannot\x20test',![],_0x9477cc(0xe9));}catch(_0x3e9c27){this[_0x9477cc(0xc8)](0xb,_0x9477cc(0x130),![],_0x9477cc(0x129)+_0x3e9c27[_0x9477cc(0x135)]);}}async[_0x295f5e(0xd0)](){const _0x35f738=_0x295f5e;try{const _0x5d2b78={'userId':Math[_0x35f738(0x9d)](Math['random']()*0x2710)+0x1,'packageId':Math['floor'](Math[_0x35f738(0x96)]()*0x5)+0x1,'startDate':this[_0x35f738(0xee)](!![]),'endDate':this[_0x35f738(0xee)](!![])},_0x1f1c40=await fetch(this[_0x35f738(0xf2)]+'/api/subscriptions',{'method':_0x35f738(0x116),'headers':{'Content-Type':_0x35f738(0xf7)},'body':JSON[_0x35f738(0x9e)](_0x5d2b78)}),_0x5e8759=await fetch(this[_0x35f738(0xf2)]+_0x35f738(0xfd),{'method':_0x35f738(0x116),'headers':{'Content-Type':_0x35f738(0xf7)},'body':JSON[_0x35f738(0x9e)](_0x5d2b78)});if(_0x1f1c40[_0x35f738(0xf9)]===0xc9&&_0x5e8759[_0x35f738(0xf9)]===0xc9)this[_0x35f738(0xc8)](0xc,_0x35f738(0xff),![],'No\x20duplicate\x20check\x20-\x20BUG\x20PRESENT');else{if(_0x1f1c40['status']===0xc9&&(_0x5e8759[_0x35f738(0xf9)]===0x190||_0x5e8759[_0x35f738(0xf9)]===0x199)){const _0x1f435d=await _0x5e8759[_0x35f738(0xea)](),_0x561711=_0x1f435d[_0x35f738(0x131)]||'';_0x561711[_0x35f738(0x9c)]()[_0x35f738(0x85)](_0x35f738(0x115))||_0x561711['toLowerCase']()[_0x35f738(0x85)](_0x35f738(0xd2))?this[_0x35f738(0xc8)](0xc,'Prevents\x20duplicate\x20subscriptions',!![],'Correctly\x20rejects\x20duplicates'):this[_0x35f738(0xc8)](0xc,_0x35f738(0xb2),![],_0x35f738(0x123)+_0x561711);}else{if(_0x1f1c40[_0x35f738(0xf9)]!==0xc9){const _0x5146b3=_0x1f1c40['status']>=0x190?await _0x1f1c40[_0x35f738(0xea)]():{},_0x7dc1ad=_0x5146b3[_0x35f738(0x131)]||'';_0x7dc1ad[_0x35f738(0x85)]('pkg_id')||_0x7dc1ad[_0x35f738(0x9c)]()['includes'](_0x35f738(0xd3))?this[_0x35f738(0xc8)](0xc,_0x35f738(0x14a),![],_0x35f738(0xf0)):this[_0x35f738(0xc8)](0xc,_0x35f738(0xb2),![],_0x35f738(0x122)+_0x1f1c40['status']);}else this[_0x35f738(0xc8)](0xc,'Duplicate\x20check\x20unclear',![],_0x35f738(0x14d)+_0x1f1c40['status']+',\x20'+_0x5e8759[_0x35f738(0xf9)]);}}}catch(_0x15f213){this['logResult'](0xc,'Duplicate\x20subscription\x20check',![],_0x35f738(0x129)+_0x15f213[_0x35f738(0x135)]);}}async[_0x295f5e(0x106)](){const _0x58c00f=_0x295f5e;try{const _0x465cb0={'userId':Math['floor'](Math[_0x58c00f(0x96)]()*0x64)+0x1,'packageId':Math[_0x58c00f(0x9d)](Math[_0x58c00f(0x96)]()*0xa)+0x1,'startDate':this[_0x58c00f(0xee)](![]),'endDate':this['randomDate'](!![])},_0x52687b=await fetch(this[_0x58c00f(0xf2)]+'/api/subscriptions',{'method':_0x58c00f(0x116),'headers':{'Content-Type':'application/json'},'body':JSON[_0x58c00f(0x9e)](_0x465cb0)});if(_0x52687b['status']===0xc9)this['logResult'](0xd,_0x58c00f(0xd9),![],'No\x20date\x20validation\x20-\x20BUG\x20PRESENT');else{if(_0x52687b['status']===0x190){const _0x5894c4=await _0x52687b[_0x58c00f(0xea)](),_0x15a58c=_0x5894c4[_0x58c00f(0x131)]||'';if(_0x15a58c[_0x58c00f(0x9c)]()['includes'](_0x58c00f(0x10b))||_0x15a58c['toLowerCase']()[_0x58c00f(0x85)]('past'))this['logResult'](0xd,_0x58c00f(0xfc),!![],_0x58c00f(0xf4));else _0x15a58c[_0x58c00f(0x85)](_0x58c00f(0xf6))||_0x15a58c[_0x58c00f(0x9c)]()[_0x58c00f(0x85)](_0x58c00f(0xd3))?this[_0x58c00f(0xc8)](0xd,'Cannot\x20test\x20date\x20validation\x20-\x20bug\x20#9\x20present',![],'Subscription\x20creation\x20fails\x20due\x20to\x20wrong\x20column\x20name'):this[_0x58c00f(0xc8)](0xd,'Date\x20validation\x20unclear',![],_0x58c00f(0xd5)+_0x15a58c);}else{if(_0x52687b['status']===0x1f4){const _0x4550b1=await _0x52687b['json'](),_0x43d8e7=_0x4550b1[_0x58c00f(0x131)]||'';_0x43d8e7[_0x58c00f(0x85)](_0x58c00f(0xf6))||_0x43d8e7['toLowerCase']()['includes']('column')?this[_0x58c00f(0xc8)](0xd,_0x58c00f(0x8f),![],_0x58c00f(0xf0)):this['logResult'](0xd,_0x58c00f(0xf8),![],'Server\x20error:\x20'+_0x43d8e7);}else this[_0x58c00f(0xc8)](0xd,_0x58c00f(0x13b),![],_0x58c00f(0x14d)+_0x52687b[_0x58c00f(0xf9)]);}}}catch(_0x379752){this[_0x58c00f(0xc8)](0xd,'Date\x20validation',![],_0x58c00f(0x129)+_0x379752[_0x58c00f(0x135)]);}}async['testBug14TicketReuse'](){const _0x224ae9=_0x295f5e;try{const _0x3663aa=Math[_0x224ae9(0x9d)](Math['random']()*0x2328)+0x3e8,_0x335865={'userId':_0x3663aa,'packageId':0x1,'startDate':this[_0x224ae9(0xee)](!![]),'endDate':this[_0x224ae9(0xee)](!![])},_0x30e9fa=await fetch(this[_0x224ae9(0xf2)]+'/api/subscriptions',{'method':_0x224ae9(0x116),'headers':{'Content-Type':'application/json'},'body':JSON[_0x224ae9(0x9e)](_0x335865)});if(_0x30e9fa[_0x224ae9(0xf9)]===0xc9){const _0xbcc4f5=await _0x30e9fa[_0x224ae9(0xea)](),_0x4571f8=_0xbcc4f5['id'],_0x3f1780=Math[_0x224ae9(0x9d)](Math['random']()*0x3e8)+0x1,_0x42c673=Math[_0x224ae9(0x9d)](Math[_0x224ae9(0x96)]()*0x1388)+0x1,_0x54a8b7={'gameId':_0x3f1780,'seatNumber':_0x42c673};await fetch(this['baseUrl']+'/api/subscriptions/'+_0x4571f8+_0x224ae9(0xdc),{'method':_0x224ae9(0x116),'headers':{'Content-Type':'application/json'},'body':JSON[_0x224ae9(0x9e)](_0x54a8b7)});const _0x52d505=await fetch(this['baseUrl']+_0x224ae9(0xe1)+_0x4571f8+_0x224ae9(0xf3),{'method':_0x224ae9(0x116),'headers':{'Content-Type':'application/json'},'body':JSON[_0x224ae9(0x9e)](_0x54a8b7)});if(_0x52d505['status']===0xc8){const _0x32a36e=await fetch(this[_0x224ae9(0xf2)]+_0x224ae9(0xe1)+_0x4571f8+_0x224ae9(0xf3),{'method':_0x224ae9(0x116),'headers':{'Content-Type':_0x224ae9(0xf7)},'body':JSON[_0x224ae9(0x9e)](_0x54a8b7)});if(_0x32a36e['status']===0xc8)this[_0x224ae9(0xc8)](0xe,'Allows\x20ticket\x20reuse',![],_0x224ae9(0xa9));else _0x32a36e['status']===0x190||_0x32a36e[_0x224ae9(0xf9)]===0x199?this[_0x224ae9(0xc8)](0xe,_0x224ae9(0x98),!![],_0x224ae9(0xa6)):this[_0x224ae9(0xc8)](0xe,_0x224ae9(0xe6),![],_0x224ae9(0xbf)+_0x32a36e[_0x224ae9(0xf9)]);}else _0x52d505[_0x224ae9(0xf9)]===0x194?this[_0x224ae9(0xc8)](0xe,_0x224ae9(0x7d),![],_0x224ae9(0x93)):this[_0x224ae9(0xc8)](0xe,'Ticket\x20reuse\x20check\x20-\x20first\x20redemption\x20failed',![],_0x224ae9(0x14d)+_0x52d505[_0x224ae9(0xf9)]);}else this['logResult'](0xe,'Ticket\x20reuse\x20check\x20-\x20cannot\x20create\x20subscription',![],_0x224ae9(0x111));}catch(_0x4ee626){this['logResult'](0xe,'Ticket\x20reuse\x20check',![],'Error:\x20'+_0x4ee626['message']);}}async[_0x295f5e(0xc3)](){const _0x187c6e=_0x295f5e;try{const _0xe4419=Math['floor'](Math['random']()*0x64)+0x1,_0x3c86bd={'autoRenew':Math[_0x187c6e(0x96)]()>0.5},_0x8ba25a=await fetch(this[_0x187c6e(0xf2)]+_0x187c6e(0xe1)+_0xe4419+'/settings',{'method':_0x187c6e(0x101),'headers':{'Content-Type':_0x187c6e(0xf7)},'body':JSON[_0x187c6e(0x9e)](_0x3c86bd)});if(_0x8ba25a[_0x187c6e(0xf9)]===0x1f4){const _0x26af31=await _0x8ba25a['json'](),_0x4aa28b=_0x26af31['error']||'';_0x4aa28b['toLowerCase']()[_0x187c6e(0x85)](_0x187c6e(0xc2))||_0x4aa28b[_0x187c6e(0x9c)]()['includes']('async')?this['logResult'](0xf,_0x187c6e(0x81),![],'Not\x20async\x20function\x20-\x20BUG\x20PRESENT'):this[_0x187c6e(0xc8)](0xf,_0x187c6e(0xe5),![],_0x187c6e(0x129)+_0x4aa28b);}else{if(_0x8ba25a['status']===0xc8){const _0x533534=await _0x8ba25a[_0x187c6e(0xea)]();typeof _0x533534===_0x187c6e(0x97)&&JSON[_0x187c6e(0x9e)](_0x533534)['includes'](_0x187c6e(0xe4))?this['logResult'](0xf,_0x187c6e(0x12b),![],'Missing\x20async\x20-\x20BUG\x20PRESENT'):this['logResult'](0xf,_0x187c6e(0xda),!![],_0x187c6e(0x8b));}else this[_0x187c6e(0xc8)](0xf,_0x187c6e(0x14f),![],_0x187c6e(0x14d)+_0x8ba25a['status']);}}catch(_0x3f94b9){this[_0x187c6e(0xc8)](0xf,_0x187c6e(0x14f),![],_0x187c6e(0x129)+_0x3f94b9[_0x187c6e(0x135)]);}}async[_0x295f5e(0x8d)](){const _0x5b079d=_0x295f5e;try{const _0x3b9aa7=Math[_0x5b079d(0x9d)](Math[_0x5b079d(0x96)]()*0x2328)+0x3e8,_0x437732={'userId':_0x3b9aa7,'packageId':0x1,'startDate':this[_0x5b079d(0xee)](!![]),'endDate':this['randomDate'](!![])},_0x331737=await fetch(this[_0x5b079d(0xf2)]+_0x5b079d(0xfd),{'method':'POST','headers':{'Content-Type':_0x5b079d(0xf7)},'body':JSON['stringify'](_0x437732)});if(_0x331737[_0x5b079d(0xf9)]===0xc9){const _0x3ac448=await _0x331737[_0x5b079d(0xea)](),_0x169234=_0x3ac448['id'];await fetch(this[_0x5b079d(0xf2)]+_0x5b079d(0xe1)+_0x169234+_0x5b079d(0xf1),{'method':_0x5b079d(0x101),'headers':{'Content-Type':_0x5b079d(0xf7)},'body':JSON['stringify']({'autoRenew':!![]})});const _0x21cd0c=_0x5b079d(0x87);try{const _0x3099c2=await fetch(''+this[_0x5b079d(0xf2)]+_0x21cd0c,{'method':_0x5b079d(0x116),'headers':{'Content-Type':_0x5b079d(0xf7)}});if(_0x3099c2[_0x5b079d(0xf9)]!==0x194){if(_0x3099c2[_0x5b079d(0xf9)]===0x1f4){const _0x575e61=await _0x3099c2[_0x5b079d(0xea)](),_0x2c8f29=_0x575e61[_0x5b079d(0x131)]||'';_0x2c8f29[_0x5b079d(0x85)](_0x5b079d(0x88))||_0x2c8f29[_0x5b079d(0x9c)]()[_0x5b079d(0x85)](_0x5b079d(0xb7))&&_0x2c8f29[_0x5b079d(0x9c)]()[_0x5b079d(0x85)](_0x5b079d(0xc1))?this[_0x5b079d(0xc8)](0x10,_0x5b079d(0xc0),![],_0x5b079d(0x90)):this[_0x5b079d(0xc8)](0x10,'Renewal\x20worker\x20has\x20error',![],_0x5b079d(0x11f)+_0x2c8f29);}else _0x3099c2[_0x5b079d(0xf9)]===0xc8?this[_0x5b079d(0xc8)](0x10,'Renewal\x20worker\x20executes\x20correctly',!![],_0x5b079d(0x11c)):this[_0x5b079d(0xc8)](0x10,_0x5b079d(0x92),![],_0x5b079d(0x14d)+_0x3099c2[_0x5b079d(0xf9)]);}else this[_0x5b079d(0xc8)](0x10,_0x5b079d(0x149),![],'No\x20renewal\x20endpoint\x20exposed\x20-\x20cannot\x20test\x20(FAIL)');}catch{this[_0x5b079d(0xc8)](0x10,_0x5b079d(0x10d),![],_0x5b079d(0x10e));}}else this[_0x5b079d(0xc8)](0x10,_0x5b079d(0x125),![],_0x5b079d(0x9f));}catch(_0x4fee38){this[_0x5b079d(0xc8)](0x10,'Renewal\x20worker',![],_0x5b079d(0x129)+_0x4fee38[_0x5b079d(0x135)]);}}async[_0x295f5e(0xe2)](){const _0x5893ae=_0x295f5e;try{const _0x231e5a=Math[_0x5893ae(0x9d)](Math['random']()*0x2328)+0x3e8,_0x307019={'userId':_0x231e5a,'packageId':0x1,'startDate':this[_0x5893ae(0xee)](!![]),'endDate':this[_0x5893ae(0xee)](!![])},_0x10f5e3=await fetch(this[_0x5893ae(0xf2)]+'/api/subscriptions',{'method':_0x5893ae(0x116),'headers':{'Content-Type':_0x5893ae(0xf7)},'body':JSON['stringify'](_0x307019)});if(_0x10f5e3[_0x5893ae(0xf9)]===0xc9){const _0x406205=await _0x10f5e3['json'](),_0x4b4b90=_0x406205['id'],_0x2f2521=new Date();_0x2f2521[_0x5893ae(0xbd)](_0x2f2521[_0x5893ae(0xb1)]()+0x64);const _0x3f9dbc={'newEndDate':_0x2f2521[_0x5893ae(0xab)]()['split']('T')[0x0]},_0x4a9c8e=await fetch(this[_0x5893ae(0xf2)]+_0x5893ae(0xe1)+_0x4b4b90+'/calculate-price',{'method':_0x5893ae(0x116),'headers':{'Content-Type':_0x5893ae(0xf7)},'body':JSON[_0x5893ae(0x9e)](_0x3f9dbc)});if(_0x4a9c8e['status']===0xc8){const _0x4ffdaa=await _0x4a9c8e[_0x5893ae(0xea)](),_0x262053=_0x4ffdaa[_0x5893ae(0xef)]||0x0;_0x262053>0x2710?this['logResult'](0x11,_0x5893ae(0x102),![],'Price:\x20'+_0x262053+_0x5893ae(0x150)):this[_0x5893ae(0xc8)](0x11,_0x5893ae(0x14e),!![],_0x5893ae(0xe3)+_0x262053);}else this[_0x5893ae(0xc8)](0x11,_0x5893ae(0xd8),![],_0x5893ae(0x14d)+_0x4a9c8e['status']);}else this[_0x5893ae(0xc8)](0x11,_0x5893ae(0xad),![],_0x5893ae(0x111));}catch(_0x357a7b){this[_0x5893ae(0xc8)](0x11,_0x5893ae(0x128),![],_0x5893ae(0x129)+_0x357a7b[_0x5893ae(0x135)]);}}async[_0x295f5e(0x9b)](){const _0x2e5c8b=_0x295f5e;try{const _0x305160=Math[_0x2e5c8b(0x9d)](Math[_0x2e5c8b(0x96)]()*0x2328)+0x3e8,_0x27b0d={'userId':_0x305160,'packageId':0x1,'startDate':this[_0x2e5c8b(0xee)](!![]),'endDate':this['randomDate'](!![])},_0x130e80=await fetch(this[_0x2e5c8b(0xf2)]+'/api/subscriptions',{'method':_0x2e5c8b(0x116),'headers':{'Content-Type':_0x2e5c8b(0xf7)},'body':JSON[_0x2e5c8b(0x9e)](_0x27b0d)});if(_0x130e80[_0x2e5c8b(0xf9)]===0xc9){const _0x1ff736=await _0x130e80['json'](),_0x422677=_0x1ff736['id'],_0x2f1a57=Math[_0x2e5c8b(0x9d)](Math[_0x2e5c8b(0x96)]()*0x64)+0x1,_0x580dd4={'gameId':_0x2f1a57};await fetch(this[_0x2e5c8b(0xf2)]+_0x2e5c8b(0xe1)+_0x422677+_0x2e5c8b(0xf3),{'method':_0x2e5c8b(0x116),'headers':{'Content-Type':_0x2e5c8b(0xf7)},'body':JSON[_0x2e5c8b(0x9e)](_0x580dd4)});const _0x32b314=await fetch(this[_0x2e5c8b(0xf2)]+'/api/subscriptions/'+_0x422677+_0x2e5c8b(0xcf),{'method':_0x2e5c8b(0x116)});if(_0x32b314[_0x2e5c8b(0xf9)]===0xc8){const _0x4826ef=await fetch(this[_0x2e5c8b(0xf2)]+_0x2e5c8b(0xe1)+_0x422677+_0x2e5c8b(0xf3),{'method':'POST','headers':{'Content-Type':_0x2e5c8b(0xf7)},'body':JSON[_0x2e5c8b(0x9e)](_0x580dd4)});if(_0x4826ef[_0x2e5c8b(0xf9)]===0xc8)this['logResult'](0x12,'Cancel\x20leaves\x20orphaned\x20game_assignments',![],_0x2e5c8b(0xed));else{if(_0x4826ef['status']===0x194)this[_0x2e5c8b(0xc8)](0x12,_0x2e5c8b(0x105),!![],'Assignments\x20properly\x20deleted');else{if(_0x4826ef['status']===0x190){const _0x50972d=await _0x4826ef[_0x2e5c8b(0xea)](),_0x6b9272=_0x50972d[_0x2e5c8b(0x131)]||'';_0x6b9272[_0x2e5c8b(0x9c)]()[_0x2e5c8b(0x85)](_0x2e5c8b(0xb5))||_0x6b9272[_0x2e5c8b(0x9c)]()['includes'](_0x2e5c8b(0xc4))?this['logResult'](0x12,'Cancel\x20validates\x20subscription\x20status',!![],_0x2e5c8b(0x112)):this[_0x2e5c8b(0xc8)](0x12,'Cancel\x20cleanup\x20unclear',![],_0x2e5c8b(0x142)+_0x6b9272);}else this[_0x2e5c8b(0xc8)](0x12,_0x2e5c8b(0xdb),![],_0x2e5c8b(0xdf)+_0x4826ef['status']);}}}else this[_0x2e5c8b(0xc8)](0x12,_0x2e5c8b(0xec),![],'Cancel\x20failed:\x20'+_0x32b314['status']);}else this[_0x2e5c8b(0xc8)](0x12,_0x2e5c8b(0xec),![],'Cannot\x20create\x20test\x20subscription\x20(other\x20bugs\x20present)');}catch(_0x838722){this[_0x2e5c8b(0xc8)](0x12,_0x2e5c8b(0xa7),![],'Error:\x20'+_0x838722['message']);}}async['runAllTests'](){const _0x8fcb13=_0x295f5e;await this[_0x8fcb13(0xb0)](),await this[_0x8fcb13(0x82)](),await this[_0x8fcb13(0xd7)](),await this[_0x8fcb13(0xd4)](),await this['testBug5SubscriptionAlways404'](),await this['testBug6TeamsEmptyArray'](),await this[_0x8fcb13(0x124)](),await this['testBug8PackagesWrongColumn'](),await this[_0x8fcb13(0xfe)](),await this['testBug10RenewWrongField'](),await this[_0x8fcb13(0xe8)](),await this['testBug12DuplicateSubscriptions'](),await this[_0x8fcb13(0x106)](),await this[_0x8fcb13(0x141)](),await this[_0x8fcb13(0xc3)](),await this[_0x8fcb13(0x8d)](),await this[_0x8fcb13(0xe2)](),await this[_0x8fcb13(0x9b)](),this[_0x8fcb13(0x99)]();}[_0x295f5e(0x99)](){const _0x2c1776=_0x295f5e,_0x2d8729=this[_0x2c1776(0xb8)][_0x2c1776(0xb9)](_0x2e90b9=>_0x2e90b9['passed'])[_0x2c1776(0x9a)],_0x132d35=this[_0x2c1776(0xb8)]['length']-_0x2d8729;console['log'](_0x2c1776(0xbe)+this['results'][_0x2c1776(0x9a)]),console[_0x2c1776(0xba)](_0x2c1776(0x137)+_0x2d8729),console[_0x2c1776(0xba)](_0x2c1776(0x11a)+_0x132d35),console[_0x2c1776(0xba)](_0x2c1776(0x144)+this['score']+'/'+this[_0x2c1776(0x8a)]),console['log']('Percentage:\x20'+(this[_0x2c1776(0x147)]/this[_0x2c1776(0x8a)]*0x64)[_0x2c1776(0xc9)](0x1)+'%');}}async function main(){const _0x57e3c0=_0x295f5e,_0x184cda=process[_0x57e3c0(0x103)][0x2]||BASE_URL;try{const _0x30273b=await fetch(_0x184cda+_0x57e3c0(0xb6));_0x30273b[_0x57e3c0(0xf9)]!==0xc8&&process[_0x57e3c0(0x11b)](0x1);}catch(_0x3de273){process[_0x57e3c0(0x11b)](0x1);}const _0x155d17=new EndpointTester(_0x184cda);await _0x155d17[_0x57e3c0(0x12d)](),process[_0x57e3c0(0x11b)](_0x155d17['score']===_0x155d17['maxScore']?0x0:0x1);}main()['catch'](_0x213274=>{const _0x190538=_0x295f5e;console[_0x190538(0x131)](_0x190538(0x119),_0x213274[_0x190538(0x135)]),process['exit'](0x1);});